# ğŸ§ª k6 Performance Tests â€“ Customer Service APIs

This project contains performance tests for microservice APIs using [k6](https://k6.io/).  
Tests include dynamic JWT authentication and support multiple API endpoints.

---

## ğŸ“¦ Project Structure

k6-tests/
â”œâ”€â”€ data/
â”‚ â””â”€â”€ customer_ids.txt # List of valid customer IDs (one per line)
â”œâ”€â”€ modules/
â”‚ â”œâ”€â”€ getPaymentPref.js # Test for /getPaymentPref/{custId}
â”‚ â”œâ”€â”€ getCustChannelRef.js # Test for /getCustChannelRefForPhysDest
â”‚ â””â”€â”€ getPSNPPreferences.js # Test for /getPSNPPreferences/{custId}
â”œâ”€â”€ config.js # Common config (e.g., BASE_URL)
â””â”€â”€ main.js # Entry point with JWT setup and test orchestration

ğŸ” JWT Authentication
Tokens are dynamically generated before the test run via:

POST https://bdd-ms-mssdk-jwt-utility-dev2.edi01-apps.dev-pcf.lb4.pbsgrp.net/jwtutility/jwt

How to Run the Tests
Run all tests from the root directory:

bash
Copy
Edit
k6 run main.js
This will:

Fetch a valid JWT

Read customer IDs from data/customer_ids.txt

Call all test modules in sequence:

getPaymentPref

getCustChannelRef

getPSNPPreferences

ğŸ§ª Adding New Tests
Create a new module in modules/

Define and export a test function that accepts the token

Import and call it from main.js

Example:


import { testNewEndpoint } from './modules/testNewEndpoint.js';

export default function (data) {
  testNewEndpoint(data.token);
}
Notes
Tokens are passed via custom header iam-claimsetjwt

You can modify headers, endpoints, or test data as needed
